\documentclass[preview]{standalone}
\input{prelude}


\begin{document}
\section{View Examples}
In this chapter we will introduce and discuss some view examples created by the author. Their purpose is to understand the idea and concept of a view and get to know some views that might be useful in real world applications i.e. in the dissertation of Dr. Max Korn.
\subsection{Transition Systems}
First we will take a look at views that can be applied to transition systems, MCs and MDPs and hence only use the properties of transition systems. That is they neither utilize any probabilistic properties of an MC nor any properties that arise from the combination of nondeterminism and the probability distribution.
\subsubsection{Atomic Propositions}
The \emph{Atomic Propositions \viewNC} groups all states to a new state that have the same set of atomic propositions.

\begin{definition}
	\redcomment{
	For a given \ts let \states be the set its states, \labelingfct its labeling function and \arbset an arbitrary set. The \grpfctN for the Atomic Propositions View is defined with $\gfctatomicprops : \states \to \imggrp, {\state}\mapsto{\labelingfct(\state)}$.}
\end{definition}

We define its \grpfctN with $\gfctatomicprops : \states \to \imggrp, {\state}\mapsto{\labelingfct(\state)}$ i.e. for all $\state \in \states : \gfctatomicprops(\state) = \labelingfct(\state)$. So it is $\gfctatomicprops(\state_1) = \gfctatomicprops(\state_2) \iff \labelingfct(\state_1) = \labelingfct(\state_2)$. According to definition \ref{def:eqrelview} for $\smstate \in \states$ it is $\eqclassv{\smstate} = \{\state \in \states \mid \labelingfct(\state) = \labelingfct(\smstate)\}$.
%$\forall \state_1, \state_2 \in \states :

By this we obtain the \viewN $\viewatomicprops$ for a given transition system \ts where: $\states' = \bigcup_{\state \in \states} \{\eqclassv{\state}\} =  \bigcup_{a \in \atomicprops} \{\{\state \in \states \mid \labelingfct(\state) = a\}\}$. All other components are constructed as in definition \ref{def:view}.

\redcomment{tikz example}

\redcomment{example from the database of max}

\subsubsection{Initial States}
The \emph{Initial State \viewNC}  groups all initial states into one single state. All other states are left untouched.
We define its \grpfctN with $\grpfct_\initstates : \states \to \imggrp$ with 

\[
\state \mapsto
\begin{cases}
	\emptyset,				& \text{if } \state \in \initstates \\
	\{\state\},          	& \text{otherwise}
\end{cases}
\]

and $\imggrp := \{\emptyset\} \cup \{\{\state\} \mid \state \in \states\}$.

For $\state_1,\state_2 \in \states$ it is $\gfcinitstates(\state_1) = \gfcinitstates(\state_2)$ \iffN $\state_1, \state_2 \in \initstates$ or $\state_1 = \state_2$. According to definition \ref{def:eqrelview} it is $\eqclassv{\state} = \{\state \in \states \mid \grpfct(\state) = \emptyset\}$ for $\state \in \initstates$ and $\eqclassv{\state} = \{\state \in \states \mid \grpfct(\state) = \{\state\} \} = \{\state\}$ for $\state \notin \initstates$.

By this we obtain the \viewN $\viewinitstates$ for a given transition system \ts where: $\states' = \bigcup_{\state \in \states} \{\eqclassv{\state}\} = \{\state \in \states \mid \state \in \initstates\}\cup \bigcup_{\state \in \states \setminus \initstates}\{\{\state\}\}$.

All other components are constructed as in definition \ref{def:view}.

\subsubsection{Outgoing Actions}
The \emph{OutAction View} groups states that share some property regarding their actions  of the outgoing transitions. Several variants are feasible. In the following we will use the expression "outgoing action \action" equivalent with "transition with outgoing action \action".

The most obvious variant to group states is to group states that \emph{have} a given outgoing action. Its grouping function looks as follow: $\grpfct_{\exists\action} : \states \to \imggrp$ with 


\[
\state \mapsto
\begin{cases}
	\action,				& \text{if } \exists \state' \in \states: (\state, \action, \state') \in \redcomment{\transitionrel} \\
	\state,          	& \text{otherwise}
\end{cases}
\]

and $\imggrp := \setoutact$.

For $\state_1,\state_2 \in \states$ it is $\gfcthasoutaction(\state_1) = \gfcthasoutaction(\state_2)$ \iffN 
there exist $\state_{a},\state_{b} \in \states$ with 
$(\state_1, \action, \state_{a}), (\state_2, \action, \state_{b}) \in \transitionrel$ (i.e. they have the same outgoing action \action) or $\state_1 = \state_2$. 
In accordance with definition \ref{def:eqrelview} it is 
$\eqclassv{\state} = \{\state \in \states \mid \gfcthasoutaction(\state) = \action\}$ if 
there exists $\state' \in \states$ so that $(\state, \action, \state') \in \transitionrel$ and it is
$\eqclassv{\state} = \{\state \in \states \mid \gfcthasoutaction(\state) = \state\} = \{s\}$ otherwise. %if for all $\state' \in \states : (\state,\action,\state') \notin \transitionrel$.

Thereby we obtain the \viewN \viewhasoutaction for a given transition system \ts where $\states' = \bigcup_{\state \in \states} \{\eqclassv{\state}\} =: \states_1 \cup \states_2$ where $\states_1 := \{\state \in \states \mid \exists \state' \in \states: (\state, \action, \state') \in \transitionrel\} = \{\state \in \states \mid \state$ has outgoing action $\action\}$ and $\states_2 := \bigcup_{\state \in \states \setminus \states_1}\{\state\}$.

Since actions are a very important part of transition systems as well as of its more powerful siblings MDPs and MCs it seems useful to further enhance this view and look at variants of it. Instead of only grouping states that only \emph{have} outgoing actions we could also quantify the amount of times that action should be outgoing.

For example we could require that a given action has to be outgoing a minimum amount of times. For this we define the \grpfctN $\gfctminoutaction : \states \to \arbset$ with

\[
\state \mapsto
\begin{cases}
	\action,				& \text{if } \exists \state_1, \dots, \state_\numoutact \in \states:  \predminoutact\\
	\state,          	& \text{otherwise}
\end{cases}
\]

and $\imggrp := \setoutact$.
 
where $\numoutact \in \natnums$ is the minimum amount of times an transition with action \action has to be outgoing in order to be grouped with the other states and 
\[
	\predminoutact := ((\state, \action, \state_1), \dots, (\state, \action, \state_\numoutact) \in \redcomment{\transitionrel}) \land |\{\state_1, \dots, \state_\numoutact\}| = \numoutact
\]
is a first order logic predicate. It requires that there are transitions with action \action to \numoutact distinct states.

For $\state_1,\state_2 \in \states$ it is $\gfctminoutaction(\state_1) = \gfctminoutaction(\state_2)$ \iffN there exist distinct $\state_{a_1}, \dots, \state_{a_\numoutact} \in \states$ and distinct $\state_{b_1}, \dots, \state_{b_\numoutact} \in \states$ so that $(\state_1, \action, \state_{a_1}), \dots, (\state_1, \action, \state_{a_\numoutact}) \in \redcomment{\transitionrel}$ and $(\state_2, \action, \state_{b_1}), \dots, (\state_2, \action, \state_{b_\numoutact}) \in \redcomment{\transitionrel}$ or $\state_1 = \state_2$. According to definition \ref{def:eqrelview} it is $\eqclassv{\state} = \{\state \in \states \mid \gfctminoutaction(\state) = \action\}$ and $\eqclassv{\state} = \{\state \in \states \mid \gfctminoutaction(\state) = \state\} = \{\state\}$ otherwise. \\
By this we obtain the \viewN $\viewminoutaction$ for a given transition system \ts where $\states' = \bigcup_{\state \in \states} \{\eqclassv{\state}\} =: \states_1 \cup \states_2$ where 

\begin{align*}
	\states_1 &:= \{\state \in \states \mid \exists \state_1, \dots, \state_\numoutact \in \states: \predminoutact\} \\ %(\state, \action, \state_1), \dots, (\state, \action, \state_\numoutact) \in \redcomment{\transitionrel}, |\{\state_1, \dots, \state_\numoutact\}| = \numoutact\} \\ 
	&\hspace{1.15mm}= \{\state \in \states \mid \text{the action } \action \text{ is outgoing at least } \numoutact \text{ times} \} \text{ and} \\
	\states_2 &:= \bigcup_{\state \in \states \setminus \states_1}\{\state\}.	
\end{align*}

In a similar fashion we define view that groups states where at most a certain number of times a given action is outgoing. We define its \grpfctN $\gfctmaxoutaction : \states \to \arbset$ with

\[
\state \mapsto
\begin{cases}
	\action,				& \text{if } \forall \state_1, \dots, \state_{\numoutact+1} \in \states: \predmaxoutact \\
	\state,          	& \text{otherwise}
\end{cases}
\]

where $\imggrp := \setoutact$, $\numoutact \in \natnums$ is the maximal number of times a transition with action \action may be outgoing and 
\[
	\predmaxoutact := ((\state, \action, \state_1), \dots, (\state, \action, \state_{\numoutact+1}) \in \redcomment{\transitionrel}) \implies \bigvee_{\mathclap{\substack{i,j \in \{1,\dots, \numoutact+1\} \\ i < j}}} \state_i = \state_j
\]
is a first order logic predicate. It ensures that if there are one more than \numoutact outgoing transitions with an action \action at least two of the states where the transitions \redcomment{end} are in fact the same. Since this is required for all possible combinations of $\numoutact + 1$ states by the grouping function only states that have at most \numoutact outgoing actions will be assigned with \action by the grouping function. The reasoning about the equality of the \grpfctN values, the obtained equivalence classes and the resulting set of states $\states'$ of the view is analogous to \viewminoutaction.

Since we already defined \grpfctsN and hence views for a required minimal and maximal amount of times an action has to be outgoing it is now easily possible to define a view that groups states where the amount of outgoing actions at least \numoutact and at most \numoutactb. We define its \grpfctN $\gfctspanoutaction : \states \to \arbset$ with

\[
\state \mapsto
\begin{cases}
	\action,				& \text{if } \exists \state_1, \dots, \state_\numoutactb \in \states: \predminoutact[\numoutactb] \\ &\text{and } \forall \state_1, \dots, \state_{\numoutact+1} \in \states: \predmaxoutact \\
	\state,          	& \text{otherwise}
\end{cases}
\]

where $\imggrp := \setoutact$ and $\numoutactb, \numoutact \in \natnums$ are the minimal and maximal number of transitions with action \action in order for state to be grouped.
We already know that for a given $\state \in \states$ the expressions $\exists \state_1, \dots, \state_\numoutact \in \states: \predminoutact$ and $\forall \state_1, \dots, \state_{\numoutactb+1} \in \states: \predmaxoutact[\numoutactb]$ require that \state has minimal and maximal amount of outgoing transitions with an action \action respectively. Hence the conjunction will be true for states where the amount of outgoing transitions with action \action is element of the set $\{\numoutactb, \numoutact+1, \dots, \numoutact-1, \numoutact\}$. We will write for this that the number of outgoing actions is \emph{in the span}.

For a given state \state and action \action we set
\[
\formoutact:= \exists \state_1, \dots, \state_\numoutactb \in \states: \predminoutact[\numoutactb]\land \\
\forall \state_1, \dots, \state_{\numoutact+1} \in \states: \predmaxoutact
\]

for convenience. \formoutact is true  \iffN the number of outgoing actions is in the span. For $\state \in \states$ it is $\gfctspanoutaction(\state_1) = \gfctspanoutaction(\state_2)$ \iffN $\formoutact[\state_1] \land \formoutact[\state_2]$ or $\state_1 = \state_2$. Then its equivalence classes are

\begin{align*}
	\eqclassv{\state} &= \{\state \in \states \mid \gfctspanoutaction(\state) = \action\} &\text{ for } \state \in \states \text{ and } \formoutact \text{ true} \\
	\eqclassv{\state} &= \{\state \in \states \mid \gfctspanoutaction(\state) = \state\} = \{\state\} &\text{ otherwise}	
\end{align*}

The new set of states \states' of the view \viewspanoutaction is the Union of the equivalence classes of equivalence relation \eqrelview on the set of states \states of the original transition system. Hence it is $\states' = \bigcup_{\state \in \states} \eqclassv{\state} =: \states_1 \cup \states_2$ where

\begin{align*}
	\states_1 &:= \{\state \in \states \mid \gfctspanoutaction(\state) = \action\} \\
	&\hspace{1.15mm}= \{\state \in \states  \mid \formoutact \text{ true}\} \\
	&\hspace{1.15mm}= \{\state \in \states \mid \text{the action } \action \text{ is outgoing } \numoutactb \text{ to } \numoutact \text{ times}\} \text{ and} \\
	\states_2 &:= \bigcup_{\state \in \states \setminus \states_1}\{\state\}.
\end{align*}

\subsection{Markov Chain}
\subsection{Markov Decision Process}
\subsection{Comparison of the Examples}
\end{document} 
